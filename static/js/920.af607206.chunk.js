"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[920],{4920:(e,s,r)=>{r.r(s),r.d(s,{default:()=>_});var t=r(5043),n=r(6213),i=r(5442),o=r(7353),l=r(5865),d=r(5795),a=r(1787),c=r(1637),x=r(9650),h=r(1596),u=r(1806),A=r(4882),j=r(8076),f=r(39),m=r(3460),p=r(1906),g=r(8483),b=r(7392),w=r(6240),y=r(9484),k=r(1387),v=r(262),C=r(444),S=r(2045),R=r(579);const N={background:"linear-gradient(90deg, #224562 0%, #2e5c7a 100%)",color:"#fff",fontWeight:"bold",fontSize:17,borderBottom:"2px solid #e3e8ee"},_=function(){const[e,s]=(0,t.useState)([]),[r,_]=(0,t.useState)(""),[H,I]=(0,t.useState)(!0),[W,z]=(0,t.useState)({}),[D,E]=(0,t.useState)(null),P=(0,w.A)();(0,i.A)(P.breakpoints.down("sm")),(0,t.useEffect)((()=>{(async()=>{I(!0);try{const e=await n.A.get("http://localhost:5000/user");s(e.data)}catch(e){E("Failed to load users")}finally{I(!1)}})()}),[]);const $=e.filter((e=>{const s=r.toLowerCase();return""===s||e.firstName.toLowerCase().includes(s)||e.lastName.toLowerCase().includes(s)}));return(0,R.jsxs)(o.A,{sx:{minHeight:"100vh",minWidth:"100vw",m:0,p:0,display:"flex",flexDirection:"row",backgroundImage:`url(${v})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",overflow:"hidden"},children:[(0,R.jsx)(C.A,{}),(0,R.jsxs)(o.A,{sx:{flex:1,minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"stretch",px:{xs:1,sm:6},py:4},children:[(0,R.jsx)(S.A,{}),(0,R.jsx)(o.A,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",px:{xs:1,sm:6},py:6},children:(0,R.jsxs)(o.A,{sx:{width:"100%",maxWidth:"100%",bgcolor:"rgba(255,255,255,0.8)",borderRadius:5,boxShadow:10,p:{xs:2,sm:4},overflowX:"auto"},children:[(0,R.jsx)(l.A,{variant:"h4",fontWeight:"bold",mb:3,textAlign:"center",children:"Users"}),(0,R.jsx)(o.A,{sx:{mb:2,width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,R.jsx)(d.A,{placeholder:"Search User",size:"small",sx:{width:{xs:"100%",sm:"240px"},borderRadius:"12px",background:"#f5f8ff","& .MuiOutlinedInput-root":{borderRadius:"12px"}},value:r,onChange:e=>_(e.target.value),InputProps:{startAdornment:(0,R.jsx)(a.A,{position:"start",children:(0,R.jsx)(y.A,{})})}})}),H?(0,R.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,R.jsx)(c.A,{})}):D?(0,R.jsx)(l.A,{color:"error",children:D}):(0,R.jsx)(x.A,{component:h.A,elevation:0,sx:{borderRadius:4,boxShadow:5,background:"rgba(245,248,255,0.90)",mb:2,maxHeight:{xs:400,md:500},overflowY:"auto"},children:(0,R.jsxs)(u.A,{stickyHeader:!0,children:[(0,R.jsx)(A.A,{children:(0,R.jsxs)(j.A,{children:[(0,R.jsx)(f.A,{sx:N,children:"No"}),(0,R.jsx)(f.A,{sx:N,children:"Name"}),(0,R.jsx)(f.A,{sx:N,children:"Email"}),(0,R.jsx)(f.A,{sx:N,children:"Phone"}),(0,R.jsx)(f.A,{sx:N,children:"Height"}),(0,R.jsx)(f.A,{sx:N,children:"Weight"}),(0,R.jsx)(f.A,{sx:N,children:"Request"}),(0,R.jsx)(f.A,{sx:N,children:"Action"})]})}),(0,R.jsx)(m.A,{children:0===$.length?(0,R.jsx)(j.A,{children:(0,R.jsx)(f.A,{colSpan:8,align:"center",children:"No users found."})}):$.map(((e,r)=>(0,R.jsxs)(j.A,{hover:!0,children:[(0,R.jsx)(f.A,{children:r+1}),(0,R.jsxs)(f.A,{children:[e.firstName," ",e.lastName]}),(0,R.jsx)(f.A,{children:e.email}),(0,R.jsx)(f.A,{children:e.phone}),(0,R.jsx)(f.A,{children:e.height}),(0,R.jsx)(f.A,{children:e.weight}),(0,R.jsx)(f.A,{children:e.deleteRequest?(0,R.jsx)(l.A,{color:"error",fontWeight:"bold",children:"Requested to Delete"}):"-"}),(0,R.jsxs)(f.A,{children:[(0,R.jsx)(p.A,{size:"small",variant:"outlined",color:"success",onClick:()=>window.open(`/payment-history?userId=${e._id}`,"_blank"),sx:{mr:1},children:"View Payment History"}),(0,R.jsx)(g.A,{title:"Delete User",children:(0,R.jsx)("span",{children:(0,R.jsx)(b.A,{color:"error",onClick:()=>(async(e,r)=>{if(window.confirm(`Are you sure you want to delete user: ${r}?`)){z((s=>({...s,[e]:!0})));try{await n.A.delete(`http://localhost:5000/user/${e}`),s((s=>s.filter((s=>s._id!==e))))}catch(t){t.response&&t.response.data&&t.response.data.message?alert("Error deleting user: "+t.response.data.message):alert("Error deleting user")}finally{z((s=>({...s,[e]:!1})))}}})(e._id,e.email),disabled:!!W[e._id],sx:{backgroundColor:"rgba(255,0,0,0.08)",borderRadius:2,"&:hover":{backgroundColor:"rgba(255,0,0,0.18)"}},children:W[e._id]?(0,R.jsx)(c.A,{size:22,color:"error"}):(0,R.jsx)(k.A,{})})})})]})]},e._id)))})]})})]})})]})]})}}}]);
//# sourceMappingURL=920.af607206.chunk.js.map